<!DOCTYPE html>

<!--suppress HtmlDeprecatedAttribute -->
<head>
    <meta charset="utf-8">
    <title>IPR Analysis 2: B18 Sims</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
              tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <script type="text/javascript"
            src="../mathjax/MathJax.js?config=TeX-AMS-MML_SVG">
            // src="../mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</head>

<body>
<!-- Add my custom pager script -->
<script type="text/javascript" src="scripts/pager.js"></script>
<link rel="stylesheet" type="text/css" href="scripts/pager.css">

<header>
    <h1>Isotropic Polarization Rotation Analysis 2: B18 sims, Angle Estimators, and Forecasting</h1>

    <time datetime="2022-02-14" class="published updated">
        2023 Feb 14
    </time> â€”
    J. Cornelison
</header>

<hr>

\(
\newcommand{\Cl}{\mathcal{C}_\ell}
\newcommand{\Cb}{\mathcal{C}_b}
\newcommand{\oCb}{\mathcal{\hat C}_b}
\newcommand{\rCb}{\mathcal{C'}_b}
\newcommand{\Ccov}{\mathrm{\mathbf{C}}}
\newcommand{\siga}{\sigma_\alpha}
\newcommand{\sigasq}{\sigma_\alpha^2}
\newcommand{\choll}{\mathbf{L}}
\newcommand{\BX}{\textbf{X}}
\newcommand{\BY}{\textbf{Y}}
\newcommand{\BI}{\textbf{I}}
\newcommand{\BBE}{\mathbb{E}}
\newcommand{\cov}{\text{Cov}}
\require{cancel}
\require{color}
\newcommand{\tozero}[1]{\color{red}{\bcancel{\color{black}{#1}}}\color{black}}
\)


<p>
In this posting, ...
</p>


<hr>

<section>
    <h2>Purification of B18 with fewer detectors</h2>
    <p>
        Making purification matrices is a really involved process so we'd rather not have to remake them for this analysis. Instead, we're hoping to reuse the purification matrix created for the BICEP3 3-year dataset (AKA B18) that was used in BK18.
    </p>
    <p>
        For this analysis, we will only be using detector pairs for which we have high-quality measurements from the RPS. This means we have only ~70% of the the detector pairs that were used in any of the given years comprising B18. Because fewer detectors means less coverage, we can expect a hit to the efficiency of the matrix purification in the maps which only contain detectors with RPS-derived pol angles.
    </p>

    <figure class="table">
        <table class="results">
            <tr>
                <th colspan="4">Nchans</th>
            </tr>
            <tr>
                <th>Year</th>
                <th>B18</th>
                <th>RPS</th>
                <th>%</th>
            </tr>
            <tr>
                <td>2016</td>
                <td>700</td>
                <td>474</td>
                <td>68</td>
            </tr>
            <tr>
                <td>2017</td>
                <td>773</td>
                <td>559</td>
                <td>72</td>
            </tr>
            <tr>
                <td>2018</td>
                <td>764</td>
                <td>570</td>
                <td>75</td>
            </tr>
            <tr>
                <th colspan="4">
                    Total Unique Chans
                </th>
            </tr>
            <tr>
                <td></td>
                <td>864</td>
                <td>572</td>
                <td>66</td>
            </tr>
        </table>
        <figcaption>
            Table of the number of detector pairs that were used in the full-year coadded maps for a given year compared to the number of those detectors for which we also have good RPS-derived angles. The number of detectors was acquired from the <tt>coaddopt.ind.rgla</tt> variable in each year's full-year coadded map file.
        </figcaption>
    </figure>

    <p>
        I check the impact on the purification efficiency by comparing two B18 simsets of 10 realizations, one with maps comprising all detectors used in B18 (sernum 6600, B18-rerun) and another with only detectors that also have RPS-derived angles (sernum 6622, B18-rerun-subset).
        The plot below compares the spectra of the two simsets. As with previous postings,
    </p>

<!--    <figure>-->
<!--        <img alt="Name pager" id="histpager" src="#" onerror=this.src="figs/blank_6x4.png" width="100%"/>-->
<!--        <figcaption>-->

<!--        </figcaption>-->
<!--        <script type="text/javascript">-->
<!--            pager.link("#histpager",-->
<!--                {-->
<!--                    'Signal Type|sig': ['Unlensed-LCDM|2','G. Dust|3','Lensed-LCDM|5','Noise|6','L-LCDM+Noise|7','L-LCDM+Noise+Dust|8'],-->
<!--                    'Purification Method|pure2': ['None|','Matrix|_matrix'],-->
<!--                    'Simset|sernum2': ['B18|6614_fgh','B18-rerun|6600_fgh','B18-rerun-subset|6622_fgh'],-->
<!--                    'cmb x noise/dust|c': ['Off|','On|_cross'],-->
<!--                },-->
<!--                function(params) {-->
<!--                    return 'figs/'+params.sernum2+'_sig_'+params.sig+'_alpha_hist_bins_2_10_offdiag_0'+params.pure2+params.c+'_normal_repsim_6614xxx8.png';-->
<!--                });-->
<!--            pager.setparams({-->
<!--                'sig': '2',-->
<!--                'pure2': '_matrix',-->
<!--                'sernum2': '6614_fgh',-->
<!--                'c': '_cross',-->
<!--            });-->
<!--        </script>-->
<!--    </figure>-->


<p>

</p>



</section>

<hr>

<section class="appendix">

<h2 class="appendix">Appendix</h2>


    <h3>Footnotes</h3>
    <p>Click on the number to return to the main text.</p>
    <div class="footnote">
        <p>
        <sup><a name="ftn1" href="#sup1">[1]</a></sup>

    </p>
    </div>
<!--    <h3>Code</h3>-->
<!--    <p>Below is a list of code that was used for this analysis. The code is committed to the pipeline and can be found in the <tt>analysis/beammap/</tt> directory.</p>-->
<!--    <p id="code"></p>-->

<!--    <h3>Data</h3>-->
<!--    <p id="data"></p>-->
    <h3>References</h3>

    <p id="references"></p>


    <p id="testp"></p>



    <script type="text/javascript">

        // Shorthand tags
        var codes = [
            "rps_fit_mirror_from_moon.m",
            ];

        // Posting titles
        var desc = [
            "Derives mirror parameters from observations of the moon.",
        ];

        // Make a list of references
        var post = document.getElementById("code");
        var msg = "<table class=\"code\">";
        for (var code in codes){
            msg = msg + "<tr><td><tt>"+codes[code]+"</tt></td><td> - </td><td>"+desc[code]+"</td>";
        };
        msg = msg+ "</table>";
        post.innerHTML = msg;

    </script>

    <script type="text/javascript">

        // Shorthand tags
        var data = [
            "moonsch.mat",
            ];

        // Posting titles
        var desc = [
            "Metadata of Moon observations",
            ];

        // Make a list of references
        var post = document.getElementById("data");
        var msg = "<table class=\"code\">";
        for (var datum in data) {
            msg = msg + "<tr><td><tt>" + data[datum] + "</tt></td><td> - </td><td>" + desc[datum] + "</td>";
        }
        ;
        msg = msg + "</table>";
        post.innerHTML = msg;

    </script>



    <script type="text/javascript">

        // This my way of making shorthand links.
        // We'll make a couple arrays with the 'tag' and href information
        // and then look through each anchor element for the specified tag.
        // The anchors should then just look like: <a href="tagname"></a>
        // and the script will automatically fill in the hyperlings and text.


        var posting_dir = window.location.href; // What's the current url?

        var bkurl = "bicep.rc.fas.harvard.edu";
        var spurl = "bicep.usap.gov";

        // These are the possible places to find postings
        // The strings are for if you post your posting in that directory.
        var sitemap = {
            jcornelison: "../../../",   // /jcornelison/postings/
            bkcmb : "../../../../",     // /bkcmb/analysis_logbook/analysis/
            bicep3: "../../../",        //
            bicep_array: "../../../",   //
            bicep2: "",                 // We shouldn't be posting in these, but still have postings we can reference.
            keck  : "",                 // keck/analysis_logbook/analysis/
            spuder: "",                 // ~spuder/hieno_analysis_logboo
            bicep1: "",                 // ~bicep1/analysis_logbook_north/
            general_projects:"",
                   };
        // Logbook Site map:
        // personal:www/jcornelison/postings/
        // bkcmb:   www/bkcmb/analysis_logbook/analysis/
        // keck:    www/keck/analysis_logbook/analysis/
        // BICEP3:  www/bicep3/analysis_logbook/
        // BA:      www/bicep_array/analysis_logbook/
        // We shouldn't be posting in these, but still have postings.
        // bicep2:
        // keck:    www/keck/analysis_logbook/analysis/
        // spuder:  www/~spuder/hieno_analysis_logbook/
        // bicep1:  www/~bicep1/analysis_logbook_north/

        // Shorthand tags
        var tags = [
            "Carroll1990",
            "Harari1992",
            "Kaufman2013",
            "JBW2016",
            "EWB2016",
            "BKIX",
            "BKXII",
            "BKXIV",
            "BKXVII",
            "JAC2023",
        ];

        // Links
        // Truncate the link down to the www directory in which it lies if you can.
        // This ensures that we can view the linked postings at Pole without the internet.
        var hrefs = [
            "papers/carroll1990.pdf",
            "papers/harari1992.pdf",
            "https://arxiv.org/pdf/1312.7877.pdf",
            "bkcmb/analysis_logbook/analysis/20160907_polrot/",
            "bkcmb/analysis_logbook/analysis/20161215_rot_sims_polrot/",
            "https://arxiv.org/pdf/1705.02523.pdf",
            "https://arxiv.org/pdf/2011.03483.pdf",
            "https://arxiv.org/pdf/2108.03316.pdf",
            "https://arxiv.org/pdf/2210.08038.pdf",
            "bkcmb/analysis_logbook/analysis/20230207_IPR_angle_fits_to_B2018/",


        ];


        // Posting titles
        var desc = [
            "Limits on a Lorentz- and parity-violating modification of electrodynamics",
            "Effects of a Nambu-Goldstone boson on the polarization of radio galaxies and the cosmic microwave background",
            "Self-Calibration of BICEP1 Three-Year Data and Constraints on Astrophysical Polarization Rotation",
            "Birefringence/Polarization rotation in K2015 and BK15",
            "Polarization Rotation Sims Global Rotation",
            "New Bounds on Anisotropies of CMB Polarization Rotation and Implications for Axion-Like Particles and Primordial Magnetic Fields",
            "Constraints on axion-like polarization oscillations in the cosmic microwave background",
            "Improved Constraints on axion-like polarization oscillations in the Cosmic Microwave Background",
            "Line of Sight Distortion Analysis: Estimates of Gravitational Lensing, Anisotropic Cosmic Birefringence, Patchy Reionization, and Systematic Errors",
            "Isotropic Polarization Rotation Analysis: Global Polarization Rotation Fits on Standard B2018 Sims",
        ];
        // Debug



        var preface = "";
        var keys = Object.keys(sitemap);
        // If we're not at pole or bicep, just post the full URL
        // If we are, go back to the www directory.
        if (posting_dir.match(new RegExp(bkurl))!=bkurl &
            posting_dir.match(new RegExp(spurl))!=spurl){
                preface = "http://" + bkurl+"/";
            }
        else {
            for (key in keys){
                if (posting_dir.match(new RegExp("/"+keys[key]+"/"))=="/"+keys[key]+"/"){
                    preface = sitemap[keys[key]];
                };
            };

        };

        // Add the prefixes we can.
        // Only add prefixes to directories in the sitemap so we don't break
        // external references.
        for (ref in hrefs) {
            for (key in keys) {

            // If there's a match, at the prefix and move on.
            if(hrefs[ref].match(new RegExp(keys[key] + "/"))==keys[key]+"/"){
                hrefs[ref] = preface+hrefs[ref];
                break;
            }
            };
        };

        // posty.innerHTML = preface;

        // Make a list of references
        var post = document.getElementById("references");
        var msg = "<table>";
        for (var tag in tags){
            msg = msg + "<tr><td><a href="+tags[tag]+"></a></td><td> - </td><td>"+desc[tag]+"</td>";
        };
        msg = msg+ "</table>";
        post.innerHTML = msg;

        // Look through all the hyperlinks and insert the proper links to the postings
        var links = document.getElementsByTagName("A");
        for (var link in links){
            for (var tag in tags){
                if (links[link].href.endsWith(tags[tag])){
                    links[link].text = "("+tags[tag]+")";
                    links[link].href = hrefs[tag];
                    links[link].target = "_blank";
                }
            }
        }

    </script>
</section>




</body>
