<!DOCTYPE html>

<!--suppress HtmlDeprecatedAttribute -->
<head>
    <meta charset="utf-8">
    <title>IPR: Benchtop Discussion</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
              tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <script type="text/javascript"
            src="../mathjax/MathJax.js?config=TeX-AMS-MML_SVG">
            // src="../mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</head>

<body>
<!-- Add my custom pager script -->
<script type="text/javascript" src="scripts/pager.js"></script>
<link rel="stylesheet" type="text/css" href="scripts/pager.css">

<header>
    <h1>Isotropic Polarization Rotation Analysis 13: RPS Benchtop Measurements and proposal to look at real CMB data(draft)</h1>

    <time datetime="2023-06-13" class="published updated">
        2023 Sep 26
    </time> —
    J. Cornelison and C. Vergès
</header>

<hr>

<p>
    This posting is part of a series which comprises the IPR analysis on BICEP3, see <a href="#references">previous postings</a> for more on this. You can find a link to the paper here: <a href="IPRpaper"></a>.
</p>

<p>
    During the July 2023 collaboration meeting, I <a href="https://docs.google.com/presentation/d/1dXGirKrPLsXhoOAK5mKj77gjf1_jzUePX9f6hOm-tMg/edit#slide=id.p" target="_blank">showed some work</a> we have been doing in the lab that involves validating our understanding of the RPS using a room-temperature receiver whose polarization angle WRT gravity is well-known.
    Through these measurements we found evidence that suggests error on the overall polarization angles could be more sensitive to alignment errors than I had originally accounted for during the Jan 2022 RPS calibration campaign on BICEP3.
    With the help of Annie Polish and a new undergraduate Kane Sjoberg, we are making continual progress on understanding the underlying physics involved.
    However, we do not anticipate completing the investigation of these mysteries for some time and so I have established a relatively large 0.3&deg; uncertainty on the overall polarization angle to put into my thesis/paper(?).
    Included with it will be a caveat that this uncertainty is both poorly understood not well quantified -- and it would not necessarily add in quadrature with the other errors in our budget.
</p>
<p>
    In a previous posting <a href="JAC2023g"></a> we outlined our strategy for unblinding the birefringence analysis to real CMB data which included wrapping up these sorts of mysteries before moving forward.
    Given that resolving the investigation on the benchtop is no longer on the same timeframe as completing my thesis, this approach no longer seems appropriate for wrapping this birefringence analysis.
    Despite the large uncertainty surrounding the absolute angle, we have developed cross checks (e.g. &Delta;&alpha; jacks<a href="JAC2023i"></a>) that, at least with the relative angles, give us a lot of confidence in the techniques we've developed.
As such, we would like to discuss our options for including the overall angle from real CMB data (or not) in my thesis and in the paper.
</p>
<p>

</p>

<hr>

<section>
    <h2>Summary of Benchtop Measurements</h2>
<p>
    In another posting, Annie is putting together a detailed summary of the benchtop measurements so I will only summarize them here.
    When that posting is complete, I will be sure to reference it here.
</p>
<p>
    We created an ambient-temperature, 95GHz, polarized receiver called the In-Situ Absolute Angle Checker or ISAAC (Figure 1.1).
    The RF chain of the ISAAC is as follows: wire-grid &rightarrow; BICEP1 90GHz feedhorn &rightarrow; PacMil high-gain GaAs detector diode.
    The polarization orientation of the ISAAC is characterized in the same way that the RPS is: the angle of the wires are registered to a reference surface and then that reference surface is registered to gravity using a TuffTilt tiltmeter<a href="JAC2023k"></a>.
</p>
    <p>
        The main idea behind these benchtop measurements is that we know the angle of the ISAAC's wire grid w.r.t. gravity to high precision and getting the same angle from observing the RPS with the ISAAC would serve as an end-to-end validation of our understanding of the apparatus.
    </p>
    <figure>
        <table>
            <tr>
                <td><img src="figs/PXL_20211209_021610655.jpg"></td>
                <td><img src="figs/PXL_20211209_021639144.jpg"></td>
            </tr>
        </table>
        <figcaption>

        </figcaption>
    </figure>

<p>
    We get angles from the RPS-ISAAC measurements in similar manner as observations on the telescope.
    We rotate the RPS from -180&deg; to 180&deg; in 30&deg; increments, recording the apparent amplitude from the ISAAC using a lock-in amplifier to produce modulation curves.
    We then fit angles to the modulation curves and compare them to the known angle of the ISAAC w.r.t. gravity as given by the tiltmeter.
</p>
<p>
    Measurements between RPS and ISAAC were first carried out at Pole as a cross-check in early 2022 before and after the RPS campaign, but we had difficulty reliably backing out the true angle of the ISAAC from these measurements.
    This led us to continued measurements on a jig back at Harvard that allows for more repeatable measurements in our ongoing investigation (Figure 1.2).
</p>
    <figure>
        <img src="figs/rps_isaac_jig.jpg" width="100%">
        <figcaption>
            Set up of the RPS-ISAAC measurements on the jig at Harvard.
        </figcaption>
    </figure>

    <p>
        We found that our trouble with backing out the true ISAAC angle comes, at least in part, from a strong dependence on RPS-derived angles with the alignment of the RPS as it points toward the ISAAC (Figure 1.3).
        For a given alignment offset in Azimuth we took ten consecutive measurements before moving on to the next offset.
        We can see that the error on the angle increases up to ~0.3&deg; over a range of 1&deg; in offset.
    </p>

    <figure>
        <img src="figs/isaac_error_vs_alignment.png" width="100%">
        <figcaption>

        </figcaption>
    </figure>

<!--    <p>-->
<!--        This data was shown during the collaboration meeting and more measurements have been taken since then.-->
<!--        We've found ...-->
<!--        The conclusions from those data are still under review, however, so they will not be making it into my thesis.-->
<!--    </p>-->


</section>
<section>
    <h2>Discussion:</h2>
    <p>
        While the benchtop investigation is still ongoing, the conclusion of the instrumental calibration will include a 0.3&deg; uncertainty on the overall angle to carry forward into the CMB analysis, at least for my thesis.
        In general, our target total instrumental+CMB analysis overall angle uncertainty has been ~0.1&deg; in order to produce a constraint that is competitive with the current state-of-the-art.
        Having an error that is 3&times; higher naturally begs the question on how we should approach including real CMB data in the birefringence analysis as it stands.
    </p>

    <p>
        We're bound to learn a few things about our CMB analysis from the real data's overall angle that we didn't see in the sims, so there's a good reason to look at the real data even if we don't include it in the paper. On the other hand, it might be beneficial to wait until the benchtop measurements are resolved before unblinding. Whether or not we unblind right now, there might be reason to <b>not</b> include our results in a paper.
        As such, we've laid out a couple options for consideration.
    </p>

    <p>
        Options:
        <ol>
            <li><b>Include the overall angle from real CMB data for the purpose of having a complete end-to-end analysis, but withhold any judgement on the significance of the results until the benchtop measurements get resolved.</b>

    <p>Example Thesis/Paper(?) Abstract:</p>
    <p><i>
        This analysis showcases an end-to-end IPR constraining technique using state-of-the-art CMB polarization data. However, this analysis still possesses a singular outstanding mystery in the instrumental calibration, resulting in a ~0.3&deg; error on the overall angle that is not well understood. Our constraint on the birefringence angle from real CMB data of … should not be considered outside the context of this poorly quantified uncertainty.
    </i></p>

    <p>
        Options for the paper:
    </p>
    <ol type="a">
        <li>Publish paper with overall angle from real CMB data.
        <ul>
            <li>
            Our biggest concern here is that, even though we'd be withholding judgement, other members of the
            community might interpret our results in someway other than intended which is something we obviously want to
            avoid.</li></ul>
        </li>
        <li>Still publish everything up to, but <b>not</b> including, the birefringence constraint on real CMB data.
        <ul>
            <li>Given our concerns above, even though we've looked at the real data, we don't necessarily need to include it in the paper.</li>
            <li>While not as satisfying as a proper constraint, the benefit here is that we get to showcase all of the things we've done well.</li>
        </ul>
        </li>
        <li>Greatly delay publication or don't publish at all.
            <ul><li>Clara and I would selfishly like to avoid this option for emotional/career reasons.</li></ul>
        </li>
    </ol>

     </li>

<!--    <ol  type="a">-->
<!--        <li>Publish paper with real CMB data with strong caveats. If/when the benchtop measurements get resolved, we'll need to commit to taking a new dataset.-->
<!--        </li>-->
<!--        <li>Publish paper without real data. Focus will be on the developed techniques that worked really well.</li>-->
<!--    </ol>-->
    <li><b>Finish thesis without including the overall angle from real CMB data.</b>
        <p>Example Thesis/Paper(?) Abstract</p>
        <p><i>We choose not to unblind to the overall polarization angle from real CMB data in light of this poorly understood uncertainty in the instrumental calibration of ~0.3&deg;. Instead, we focus primarily on the tests on relative angles from real CMB data that give us a high level of confidence in this calibration technique...</i></p>

        <p>Options for the paper:</p>
    </li>
    <ol  type="a">
        <li>Publish paper without real data. Same as 1.b.</li>
        <li>Wait until benchtop mysteries get resolved, then unblind to overall angle and publish results in paper.</li>
        <ul><li>Predicated on the assumption that the RPS isn't the issue.</li>
            <li>If the benchtop measurements confirm the analysis comes with a 0.3&deg;, do we still publish?</li>
            <li>We could consider other cross-checks that might assuage the benchtop uncertainty (e.g. pol angles from the Moon's quadrupole) using data we already have.</li>
        </ul>
    </ol>
    <li><b>Other options?</b></li>
</ol>
    </p>

</section>

<hr>

<section class="appendix">
<h2 class="appendix">Appendix</h2>

<!--
    <h3>Footnotes</h3>
    <p>Click on the number to return to the main text.</p>
    <div class="footnote">
        <p>
        <sup><a name="ftn1" href="#sup1">[1]</a></sup>
    </p>
    </div>
-->
    <!--
    <h3>Code</h3>
    <p>Below is a list of code that was used for this analysis. The code is committed to the pipeline and can be found in the <tt>analysis/beammap/</tt> directory.</p>
    <p id="code"></p>

    <p id="testp"></p>

    <script type="text/javascript">

        // Shorthand tags
        var codes = [
            "rps_fit_mirror_from_moon.m",
            ];

        // Posting titles
        var desc = [
            "Derives mirror parameters from observations of the moon.",
        ];

        // Make a list of references
        var post = document.getElementById("code");
        var msg = "<table class=\"code\">";
        for (var code in codes){
            msg = msg + "<tr><td><tt>"+codes[code]+"</tt></td><td> - </td><td>"+desc[code]+"</td>";
        };
        msg = msg+ "</table>";
        post.innerHTML = msg;

    </script>


    <h3>Data</h3>
    <p id="data"></p>



    <script type="text/javascript">

        // Shorthand tags
        var data = [
            "moonsch.mat",
            ];

        // Posting titles
        var desc = [
            "Metadata of Moon observations",
            ];

        // Make a list of references
        var post = document.getElementById("data");
        var msg = "<table class=\"code\">";
        for (var datum in data) {
            msg = msg + "<tr><td><tt>" + data[datum] + "</tt></td><td> - </td><td>" + desc[datum] + "</td>";
        }
        ;
        msg = msg + "</table>";
        post.innerHTML = msg;

    </script>
-->


    <h3>References</h3>

    <p id="references"></p>


    <script type="text/javascript">

        // This my way of making shorthand links.
        // We'll make a couple arrays with the 'tag' and href information
        // and then look through each anchor element for the specified tag.
        // The anchors should then just look like: <a href="tagname"></a>
        // and the script will automatically fill in the hyperlings and text.


        var posting_dir = window.location.href; // What's the current url?

        var bkurl = "bicep.rc.fas.harvard.edu";
        var spurl = "bicep.usap.gov";

        // These are the possible places to find postings
        // The strings are for if you post your posting in that directory.
        var sitemap = {
            jcornelison: "../../../",   // /jcornelison/postings/
            cverges: "../../",          // cverges/
            bkcmb : "../../../../",     // /bkcmb/analysis_logbook/analysis/
            bicep3: "../../../",        //
            bicep_array: "../../../",   //
            bicep2: "",                 // We shouldn't be posting in these, but still have postings we can reference.
            keck  : "",                 // keck/analysis_logbook/analysis/
            spuder: "",                 // ~spuder/hieno_analysis_logboo
            bicep1: "",                 // ~bicep1/analysis_logbook_north/
            general_projects:"",
                   };
        // Logbook Site map:
        // personal:www/jcornelison/postings/
        // bkcmb:   www/bkcmb/analysis_logbook/analysis/
        // keck:    www/keck/analysis_logbook/analysis/
        // BICEP3:  www/bicep3/analysis_logbook/
        // BA:      www/bicep_array/analysis_logbook/
        // We shouldn't be posting in these, but still have postings.
        // bicep2:
        // keck:    www/keck/analysis_logbook/analysis/
        // spuder:  www/~spuder/hieno_analysis_logbook/
        // bicep1:  www/~bicep1/analysis_logbook_north/

        // Shorthand tags
        var tags = [
            "JAC2023a",
            "JAC2023b",
            "JAC2023c",
            "JAC2023d",
            "JAC2023e",
            "JAC2023f",
            "CV2023a",
            "JAC2023g",
            "CV2023b",
            "JAC2023h",
            "JAC2023i",
            "JAC2023j",
            "IPRpaper",
            "JAC2023k",
        ];

        // Links
        // Truncate the link down to the www directory in which it lies if you can.
        // This ensures that we can view the linked postings at Pole without the internet.
        var hrefs = [
            "bkcmb/analysis_logbook/analysis/20230207_IPR_angle_fits_to_B2018/",
            "bkcmb/analysis_logbook/analysis/20230214_IPR_B18_mat_pure/",
            "bkcmb/analysis_logbook/analysis/20230214_IPR_pol_rot_sims/",
            "bkcmb/analysis_logbook/analysis/20230328_IPR_high_ell/",
            "bkcmb/analysis_logbook/analysis/20230328_IPR_forecasting/",
            "bkcmb/analysis_logbook/analysis/20230613_IPR_B18_subsets/",
            "bkcmb/analysis_logbook/analysis/20230613_IPR7_dust/",
            "bkcmb/analysis_logbook/analysis/2023mmdd_IPR_unblinding_proposal/",
            "bkcmb/analysis_logbook/analysis/20230711_IPR9_beams/",
            "bkcmb/analysis_logbook/analysis/20230711_IPR_final_50/",
            "bkcmb/analysis_logbook/analysis/20230711_IPR_det_subset_jacks/",
            "bkcmb/analysis_logbook/analysis/20230801_delta_alpha_maps/",
            "https://www.overleaf.com/read/pnnzqscqtpsn",
            "bkcmb/analysis_logbook/analysis/20230214_rps_grid_cal/",
        ];


        // Posting titles
        var desc = [
            "Isotropic Polarization Rotation Analysis: Global Polarization Rotation Fits on Standard B2018 Sims",
            "Isotropic Polarization Rotation Analysis 2: B18 sims and combined EB+TB fits",
            "Isotropic Polarization Rotation Analysis 3: B2018 Polarization Rotation sims",
            "Isotropic Polarization Rotation Analysis 4: Angle estimates including higher ell-bins",
            "Isotropic Polarization Rotation Analysis 5: Basic Forecasting of Angle Uncertainty on B18 sims",
            "Isotropic Polarization Rotation Analysis 6: Angle Fits With Reduced Coverage in B18 sims",
            "Isotropic Polarisation Rotation Analysis 7: Alternate dust models",
            "Isotropic Polarization Rotation Analysis 8: Unblinding Strategy",
            "Isotropic Polarization Rotation Analysis 9: Beam Effects",
            "Isotropic Polarization Rotation Analysis 10: Final Pager with 50 Sims (blinded)",
            "Isotropic Polarization Rotation Analysis 11: Δα Jacks",
            "Isotropic Polarization Rotation Analysis 12: Δα Maps Pager",
            "IPR Analysis Paper",
            "RPS Analysis: Polarizing Wire Grid Angle Calibration",
        ];
        // Debug
        var posty = document.getElementById("testp");


        var preface = "";
        var keys = Object.keys(sitemap);
        // If we're not at pole or bicep, just post the full URL
        // If we are, go back to the www directory.
        if (posting_dir.match(new RegExp(bkurl))!=bkurl &
            posting_dir.match(new RegExp(spurl))!=spurl){
                preface = "http://" + bkurl+"/";
            }
        else {
            for (key in keys){
                if (posting_dir.match(new RegExp("/"+keys[key]+"/"))=="/"+keys[key]+"/"){
                    preface = sitemap[keys[key]];
                };
            };

        };

        // Add the prefixes we can.
        // Only add prefixes to directories in the sitemap so we don't break
        // external references.
        for (ref in hrefs) {
            for (key in keys) {

            // If there's a match, at the prefix and move on.
            if(hrefs[ref].match(new RegExp(keys[key] + "/"))==keys[key]+"/"){
                hrefs[ref] = preface+hrefs[ref];
                break;
            }
            };
        };

        // posty.innerHTML = preface;

        // Make a list of references
        var post = document.getElementById("references");
        var msg = "<table>";
        for (var tag in tags){
            msg = msg + "<tr><td><a href="+tags[tag]+"></a></td><td> - </td><td>"+desc[tag]+"</td>";
        };
        msg = msg+ "</table>";
        post.innerHTML = msg;

        // Look through all the hyperlinks and insert the proper links to the postings
        var links = document.getElementsByTagName("A");
        for (var link in links){
            for (var tag in tags){
                if (links[link].href.endsWith(tags[tag])){
                    links[link].text = "("+tags[tag]+")";
                    links[link].href = hrefs[tag];
                    links[link].target = "_blank";
                }
            }
        }

    </script>
</section>
</body>
