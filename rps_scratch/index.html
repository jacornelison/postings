<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Scratch — J. Cornelison</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Load up MathJax for math notation -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            TeX: { equationNumbers: { autoNumber: "AMS" } }
        });
    </script>
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
              tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
        });
    </script>
    <script type="text/javascript"
            src="../mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>

</head>

<body>
<!-- Add my custom pager script -->
<script type="text/javascript" src="scripts/pager.js"></script>
<link rel="stylesheet" type="text/css" href="scripts/pager.css">

<header>
    <h1>RPS_scratch</h1>

    <time datetime="2020-xx-xx" class="published updated">
        YYYY MMM DD
    </time> —
    J. Cornelison
</header>

<hr>

<section>
    <h3>Is the </h3>
    <p></p>

    <figure id="tilefig">
        <img alt="pager" id="tilepager" src="#" width="60%"/>
        <figcaption>
            $\theta_{tilt}$: Raw tilt readout averaged over the whole rasterset. $\phi_{pair}$: RPS-derived 'pair-diff' polarization angle with the all-DK average subtracted. $\phi_{0}$: Per detector polarization angles for detectors designed to be close to $\phi=0^o$ (e.g. Pol B's for MCE0 and Pol A's for MCE's 1 thru 3). $\phi_{90}$: Per detector polarization angles for detectors designed to be close to $\phi=90^o$
        </figcaption>
        <script type="text/javascript">
            var tpager = new Pager("tilepager")
            tpager.link("#tilepager",
                {
                    'Plot|p':['$\\theta_{tilt}$|tilt','$\\phi_{pair}$|phiq','$\\phi_0' +
                    '$|phi0','$\\phi_{90}$|phi90','$\\sigma_{tilt}$|tiltstd'],
                    'DK|k':['0','90','45','135','45_2'],
                    'Cuts|c':['None|','tilt std<0.05|_cut']
                },
                function(params) {
                    return 'figs/tileplot_dk_'+params.k+'_'+params.p+params.c+'.png';
                });
            tpager.setparams({
                'p':'tilt',
                'k': '0',
                'c': '_cut',

            });
        </script>
    </figure>

    <figure>
        <img src="figs/scatterplot_alldk.png" width="50%"/>
        <figcaption>
            Scatter plots of $\phi_{pair}$ vs $\theta_{tilt}$ for each DK-observation. No strong correlations can be seen in any of the plots.
        </figcaption>
    </figure>


</section>

In words, destepping is ...

<section>

    <figure>
        <img src="figs/tilt_timestream_compare.png" width="100%"/>
        <figcaption>

        </figcaption>
    </figure>


    <figure>
        <img src="figs/tilt_timestream_compare_with_pol.png" width="100%"/>
        <figcaption>

        </figcaption>
    </figure>



</section>

<section>


    <figure>
        <img alt="pager" id="scanpager" src="#" width="100%"/>
        <figcaption>
            Raw timestreams of the tilt meter in the RPS. Observations 1 to 3 correspond to DK=0; 4 to 6 at DK=90; 7 to 9 at DK=45; 10 to 12 at DK=135; and 13 to 14 at DK=45.
        </figcaption>
        <script type="text/javascript">
            pager.link("#scanpager",
                {
                    //'Plot|p':['Raw|','Destepped|_corr'],
                    'DK|k':['0','90','45','135','45_2'],
                    'Azoff|a':['-13','-4','4'],

                },
                function(params) {
                    return 'figs/tilt_monitor_dk_'+params.k+'_azoffs_'+params.a+'.png';//params.p+'.png';
                });
            pager.setparams({
                'p':'',
                'k': '90',
                'a':'-13'
            });
        </script>
    </figure>



</section>

<!--    <h3>Code</h3>-->
<!--    <p>Below is a list of code that was used for this analysis. The entries under <tt>pipeline code</tt> is committed to the pipeline and can be found in the designated directories. Those under <tt>posting code</tt> can be found in the <tt>scripts/</tt> directory of this posting.</p>-->
<!--    <p id="code"></p>-->


<!--    <h3>References</h3>-->

<!--    <p id="references"></p>-->

<!--    <p id="testp"></p>-->

<!--    <script type="text/javascript">-->

<!--        // Code name-->
<!--        var codes = [-->
<!--            "\<b\>Pipeline Code\</b\>",-->
<!--            "util/encoder_to_raw_mount_coords.m",-->
<!--            "util/beam_map_pointing_model.m",-->
<!--            "\<b\>Posting Code\</b\>",-->
<!--            "sim_scan.m",-->
<!--            "ipm_check.m",-->
<!--            "reckon_check.m",-->
<!--            "kbmp_check.m",-->
<!--            "example_load_and_plot",-->
<!--            ];-->

<!--        // Short Code description-->
<!--        var desc = [-->
<!--            "",-->
<!--            "Converts raw encoder values from GCP arcfiles to Raw Mount Coordinates $(A_0,E_0,K_0)$.",-->
<!--            "Converts Raw Mount Coordinates to inst.-fixed coords.",-->
<!--            "",-->
<!--            "Makes example az/el/dk scans and runs them through the pointing models.",-->
<!--            "Compares BMPM outputs to IPM for Fig. 1.3.",-->
<!--            "Compares BMPM outputs to reckon for Fig. 1.4.",-->
<!--            "Compares BMPM outputs to KBMP for Fig. 1.5.",-->
<!--            "Example code to load real data and apply the pointing model.",-->
<!--        ];-->

<!--        // Make a list of references-->
<!--        var post = document.getElementById("code");-->
<!--        var msg = "<table class=\"code\">";-->
<!--        for (var code in codes){-->
<!--            msg = msg + "<tr><td><tt>"+codes[code]+"</tt></td><td> - </td><td>"+desc[code]+"</td>";-->
<!--        };-->
<!--        msg = msg+ "</table>";-->
<!--        post.innerHTML = msg;-->

<!--    </script>-->


    <script type="text/javascript">

        // This my way of making shorthand links.
        // We'll make a couple arrays with the 'tag' and href information
        // and then look through each anchor element for the specified tag.
        // The anchors should then just look like: <a href="tagname"></a>
        // and the script will automatically fill in the hyperlings and text.


        var posting_dir = window.location.href; // What's the current url?

        var bkurl = "bicep.rc.fas.harvard.edu";
        var spurl = "bicep.usap.gov";

        // These are the possible places to find postings
        // The strings are for if you post your posting in that directory.
        var sitemap = {
            jcornelison: "../../../",   // /jcornelison/postings/
            bkcmb : "../../../../",     // /bkcmb/analysis_logbook/analysis/
            bicep3: "../../../",        //
            bicep_array: "../../../",   //
            bicep2: "",                 // We shouldn't be posting in these, but still have postings.
            keck  : "",                 // keck/analysis_logbook/analysis/
            spuder: "",                 // ~spuder/hieno_analysis_logboo
            bicep: "",                 // ~bicep/analysis_logbook_north/
                   };
        // Logbook Site map:
        // personal:www/jcornelison/postings/
        // bkcmb:   www/bkcmb/analysis_logbook/analysis/
        // keck:    www/keck/analysis_logbook/analysis/
        // BICEP3:  www/bicep3/analysis_logbook/
        // BA:      www/bicep_array/analysis_logbook/
        // We shouldn't be posting in these, but still have postings.
        // bicep2:
        // keck:    www/keck/analysis_logbook/analysis/
        // spuder:  www/~spuder/hieno_analysis_logbook/
        // bicep1:  www/~bicep1/analysis_logbook_north/

        // Shorthand tags
        var tags = [
            "KWY2007",
            "CAB2012",
            "RWO2013",
            "IDB2013",
            "CAB2014",
            "JBW2018",
            "JAC2019",
        ];

        // Links
        // Truncate the link down to the www directory in which is lies if you can.
        var hrefs = [
            "~bicep/analysis_logbook_north/20070318_pointing_supplement/pointing_article.pdf",
            "keck/analysis_logbook/analysis/20120510_beam_map_pointing/",
            "bkcmb/analysis_logbook/analysis/20130430_reckon/reckon.html",
            "bkcmb/analysis_logbook/analysis/20131005_sidelobe_coordinates/sidelobe_coordinates.pdf",
            "keck/analysis_logbook/analysis/20140203_beam_map_pointing/",
            "/bkcmb/analysis_logbook/analysis/20181207_B2018_beamcen/",
            "bkcmb/analysis_logbook/analysis/20190516_rps_pointing_defs/",
        ];


        // Posting titles
        var desc = [
            "BICEP Pointing Supplement",
            "Pointing Model for Keck Beam Maps",
            "Ki Won's pointing Note and Matlab Reckon()",
            "Calculations for Beam Mapping in Spherical Coordinates",
            "Spherical Coordinates for Beam Maps",
            "B2016, B2017, and B2018 CMB-derived beam center correlations",
            "Pointing Model Definitions for Polarized Beam Mapping",
        ];
        // Debug
        var posty = document.getElementById("testp");


        var preface = "";
        var keys = Object.keys(sitemap);
        // If we're not at pole or bicep, just post the full URL
        // If we are, go back to the www directory.
        if (posting_dir.match(new RegExp(bkurl))!=bkurl &
            posting_dir.match(new RegExp(spurl))!=spurl){
                preface = "http://" + bkurl+"/";
            }
        else {
            for (key in keys){
                if (posting_dir.match(new RegExp("/"+keys[key]+"/"))=="/"+keys[key]+"/"){
                    preface = sitemap[keys[key]];
                };
            };

        };

        // Add the prefixes we can.
        // Only add prefixes to directories in the sitemap so we don't break
        // external references.
        for (ref in hrefs) {
            for (key in keys) {

            // If there's a match, at the prefix and move on.
            if(hrefs[ref].match(new RegExp(keys[key] + "/"))==keys[key]+"/"){
                hrefs[ref] = preface+hrefs[ref];
                break;
            }
            };
        };

        // posty.innerHTML = preface;

        // Make a list of references
        var post = document.getElementById("references");
        var msg = "<table>";
        for (var tag in tags){
            msg = msg + "<tr><td><a href="+tags[tag]+"></a></td><td> - </td><td>"+desc[tag]+"</td>";
        };
        msg = msg+ "</table>";
        post.innerHTML = msg;

        // Look through all the hyperlinks and insert the proper links to the postings
        var links = document.getElementsByTagName("A");
        for (var link in links){
            for (var tag in tags){
                if (links[link].href.endsWith(tags[tag])){
                    links[link].text = "("+tags[tag]+")";
                    links[link].href = hrefs[tag];
                    links[link].target = "_blank";
                }
            }
        }

    </script>
</section>
</body>
